<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Artists</title>
    <link rel="stylesheet" href="../../css/style.css" />
  </head>
  <body>
    <main>
      <nav id="nav">
        <ul>
          <li><a href="../gallery.html">Gallery</a></li>
          <li>
            <a href="artists.html">Artists</a>
          </li>
          <li><a href="../publications/publications.html">Publications</a></li>
          <li><a href="../art-history/art-history.html">Art History</a></li>
          <li><a href="../contact/contact.html">Contact</a></li>
        </ul>
      </nav>
      <div id="intro-container">
        <div id="artists-intro">
          <img id="udem-logo" src="../../assets/artists-photos/udem.png" />
          <p>
            Artists are students from the algorithmic art course at Université
            de Montréal
          </p>
        </div>
        <div id="course-repo-button">Repo</div>
      </div>

      <div id="artists-container"></div>
      <div id="artists-popup-container">
        <p id="show-artists-list">Show list of artists</p>
        <div id="artists-popup">
          <div id="close">X</div>
          <p id="artists-title">Artists</p>
          <div id="artists-list"></div>
        </div>
      </div>
      <script>
        const artistsContainer = document.getElementById("artists-container");
        const artistsListPopupContainer =
          document.getElementById("show-artists-list");
        const artistsPopup = document.getElementById("artists-popup");
        const artistsListPopup = document.getElementById("artists-list");
        const closePopup = document.getElementById("close");
        const courseRepoButton = document.getElementById("course-repo-button");
        let artistsList = [];
        async function loadData() {
          try {
            const response = await fetch("../../art/artworks.json");
            artworks = await response.json();

            artworks.forEach((artwork) => {
              let i = 0;
              if (
                !artistsList.some((artist) =>
                  artist[0].includes(artwork.artist)
                )
              ) {
                artistsList.push([
                  artwork.artist,
                  artwork.year,
                  [artwork.name],
                ]);
              } else {
                const index = artistsList.findIndex(
                  (artist) => artist[0] === artwork.artist
                );
                artistsList[index][2].push(artwork.name);
              }
              i++;
            });
            artistsList.sort(() => Math.random() - 0.5);
          } catch (error) {
            console.error("Erreur lors du chargement des données :", error);
          }
        }
        loadData().then(() => {
          artistsList.forEach((artist) => {
            const artistCard = document.createElement("div");
            artistCard.className = "artistCard";

            const artistName = document.createElement("div");
            artistName.className = "artistName";
            artistName.textContent = artist[0];
            artistCard.appendChild(artistName);

            const artistYear = document.createElement("div");
            artistYear.className = "artistInfo";
            artistYear.textContent = artist[1];
            artistCard.appendChild(artistYear);

            const artistArtworks = document.createElement("div");
            artistArtworks.className = "artistArtworks";

            let a = 0;
            artist[2].forEach((artwork) => {
              if (a == 0) {
                artistArtworks.innerText += `${artwork}`;
              } else {
                artistArtworks.innerText += `, ${artwork}`;
              }
              a++;
            });

            artistCard.appendChild(artistArtworks);

            const artistNamePopup = document.createElement("p");
            artistNamePopup.className = "artistNamePopup";
            artistNamePopup.textContent = artist[0];
            artistsListPopup.appendChild(artistNamePopup);

            artistsContainer.appendChild(artistCard);
          });
          artistsListPopupContainer.addEventListener("click", () => {
            artistsPopup.style.display = "block";
          });
          closePopup.addEventListener("click", () => {
            artistsPopup.style.display = "none";
          });
          courseRepoButton.addEventListener("click", () => {
            window.location.href =
              "https://github.com/rethread-studio/algorithmic-art-course";
          });
        });
      </script>
    </main>
    <!-- <footer>
      <p>Footer</p>
    </footer> -->
  </body>
</html>
