<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Software Performing Art</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.3/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.3/addons/p5.sound.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="../../libraries/p5.speech.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  </head>
  <body>
    <header></header>
    <main>
      <nav>
        <ul>
          <li><a href="../gallery.html">Gallery</a></li>
          <li><a href="../artists/artists.html">Artists</a></li>
          <li><a href="../publications/publications.html">Publications</a></li>
          <li><a href="./art-history.html">Art History</a></li>
          <li><a href="../contact/contact.html">Contact</a></li>
        </ul>
      </nav>
      <div id="art-history-container"></div>
    </main>
    <script>
      let container = document.getElementById("art-history-container");
      let eventsList = [];
      async function loadData() {
        const response = await fetch("./art-history.json");
        events = await response.json();

        events.forEach((event) => {
          eventsList.push([
            event.date,
            event.srcColor,
            event.srcBW,
            event.page,
          ]);
        });
      }
      loadData().then(() => {
        eventsList.forEach((event) => {
          const card = document.createElement("div");
          card.className = "history-card";

          const date = document.createElement("div");
          date.className = "date-history";
          date.textContent = event[0];
          card.appendChild(date);

          const image = document.createElement("img");
          image.className = "image-history";
          image.src = event[2];
          card.appendChild(image);

          container.appendChild(card);

          card.addEventListener("mouseenter", () => {
            date.classList.add("date-history-hover");
            image.src = event[1];
          });
          card.addEventListener("mouseleave", () => {
            date.classList.remove("date-history-hover");
            image.src = event[2];
          });
          card.addEventListener("click", () => {
            window.location.href = event[3];
          });
          function resetCard() {
            date.classList.remove("date-history-hover");
            image.src = event[2];
          }

          window.addEventListener("pageshow", resetCard);
          window.addEventListener("load", resetCard);
        });
      });
    </script>
    <!-- <footer>
      <p>Footer</p>
    </footer> -->
  </body>
</html>
